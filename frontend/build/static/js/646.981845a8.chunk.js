"use strict";(self.webpackChunkmicroapps=self.webpackChunkmicroapps||[]).push([[646],{1646:function(e,t,a){a.r(t),a.d(t,{diagram:function(){return P}});var o=a(7762),r=a(3706),s=a(8433),n=a(8221),i=a(2488),c=a(2725),d=a(881),l=a(3385),p=(a(8703),a(9175),a(8584),a(7351),a(504),"rect"),g="rectWithTitle",h="statediagram",b="".concat(h,"-").concat("state"),u="transition",y="".concat(u," ").concat("note-edge"),v="".concat(h,"-").concat("note"),f="".concat(h,"-").concat("cluster"),w="".concat(h,"-").concat("cluster-alt"),x="parent",m="note",T="state",S="----",k="".concat(S).concat(m),D="".concat(S).concat(x),A="fill:none",B="fill: #333",E="text",C="normal",R={},V=0;function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:S,r=null!==a&&a.length>0?"".concat(o).concat(a):"";return"".concat(T,"-").concat(e).concat(r,"-").concat(t)}var M=function(e,t,a,o,s,n){var c,d=a.id,l=void 0===(c=o[d])||null===c?"":c.classes?c.classes.join(" "):"";if("root"!==d){var h=p;!0===a.start&&(h="start"),!1===a.start&&(h="end"),a.type!==r.a&&(h=a.type),R[d]||(R[d]={id:d,shape:h,description:i.d.sanitizeText(d,(0,i.g)()),classes:"".concat(l," ").concat(b)});var u=R[d];a.description&&(Array.isArray(u.description)?(u.shape=g,u.description.push(a.description)):u.description.length>0?(u.shape=g,u.description===d?u.description=[a.description]:u.description=[u.description,a.description]):(u.shape=p,u.description=a.description),u.description=i.d.sanitizeTextOrArray(u.description,(0,i.g)())),1===u.description.length&&u.shape===g&&(u.shape=p),!u.type&&a.doc&&(i.l.info("Setting cluster for ",d,I(a)),u.type="group",u.dir=I(a),u.shape=a.type===r.b?"divider":"roundedWithTitle",u.classes=u.classes+" "+f+" "+(n?w:""));var T={labelStyle:"",shape:u.shape,labelText:u.description,classes:u.classes,style:"",id:d,dir:u.dir,domId:N(d,V),type:u.type,padding:15};if(a.note){var S={labelStyle:"",shape:"note",labelText:a.note.text,classes:v,style:"",id:d+k+"-"+V,domId:N(d,V,m),type:u.type,padding:15},M={labelStyle:"",shape:"noteGroup",labelText:a.note.text,classes:u.classes,style:"",id:d+D,domId:N(d,V,x),type:"group",padding:0};V++;var L=d+D;e.setNode(L,M),e.setNode(S.id,S),e.setNode(d,T),e.setParent(d,L),e.setParent(S.id,L);var P=d,W=S.id;"left of"===a.note.position&&(P=S.id,W=d),e.setEdge(P,W,{arrowhead:"none",arrowType:"",style:A,labelStyle:"",classes:y,arrowheadStyle:B,labelpos:"c",labelType:E,thickness:C})}else e.setNode(d,T)}t&&"root"!==t.id&&(i.l.trace("Setting node ",d," to be child of its parent ",t.id),e.setParent(d,t.id)),a.doc&&(i.l.trace("Adding nodes children "),z(e,a,a.doc,o,s,!n))},z=function(e,t,a,o,s,n){i.l.trace("items",a),a.forEach((function(a){switch(a.stmt){case r.c:case r.a:M(e,t,a,o,s,n);break;case r.S:M(e,t,a.state1,o,s,n),M(e,t,a.state2,o,s,n);var c={id:"edge"+V,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:A,labelStyle:"",label:i.d.sanitizeText(a.description,(0,i.g)()),arrowheadStyle:B,labelpos:"c",labelType:E,thickness:C,classes:u};e.setEdge(a.state1.id,a.state2.id,c,V),V++}}))},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.e,a=t;if(e.doc)for(var o=0;o<e.doc.length;o++){var s=e.doc[o];"dir"===s.stmt&&(a=s.value)}return a},L={setConf:function(e){for(var t=0,a=Object.keys(e);t<a.length;t++){e[a[t]]}},getClasses:function(e,t){i.l.trace("Extracting classes"),t.db.clear();try{return t.parser.parse(e),t.db.extract(t.db.getRootDocV2()),t.db.getClasses()}catch(a){return a}},draw:function(e,t,a,g){i.l.info("Drawing state diagram (v2)",t),R={};var b=g.db.getDirection();void 0===b&&(b=r.D);var u=(0,i.g)(),y=u.securityLevel,v=u.state,f=v.nodeSpacing||50,w=v.rankSpacing||50;i.l.info(g.db.getRootDocV2()),g.db.extract(g.db.getRootDocV2()),i.l.info(g.db.getRootDocV2());var x,m=g.db.getStates(),T=new s.k({multigraph:!0,compound:!0}).setGraph({rankdir:I(g.db.getRootDocV2()),nodesep:f,ranksep:w,marginx:8,marginy:8}).setDefaultEdgeLabel((function(){return{}}));M(T,void 0,g.db.getRootDocV2(),m,g.db,!0),"sandbox"===y&&(x=(0,n.Ys)("#i"+t));var S="sandbox"===y?(0,n.Ys)(x.nodes()[0].contentDocument.body):(0,n.Ys)("body"),k=S.select('[id="'.concat(t,'"]')),D=S.select("#"+t+" g");(0,c.r)(D,T,["barb"],h,t);l.u.insertTitle(k,"statediagramTitleText",v.titleTopMargin,g.db.getDiagramTitle());var A=k.node().getBBox(),B=A.width+16,E=A.height+16;k.attr("class",h);var C=k.node().getBBox();(0,d.c)(k,E,B,v.useMaxWidth);var V="".concat(C.x-8," ").concat(C.y-8," ").concat(B," ").concat(E);i.l.debug("viewBox ".concat(V)),k.attr("viewBox",V);var N,z=document.querySelectorAll('[id="'+t+'"] .edgeLabel .label'),L=(0,o.Z)(z);try{for(L.s();!(N=L.n()).done;){var P=N.value,W=P.getBBox(),Y=document.createElementNS("http://www.w3.org/2000/svg",p);Y.setAttribute("rx",0),Y.setAttribute("ry",0),Y.setAttribute("width",W.width),Y.setAttribute("height",W.height),P.insertBefore(Y,P.firstChild)}}catch(j){L.e(j)}finally{L.f()}}},P={parser:r.p,db:r.d,renderer:L,styles:r.s,init:function(e){e.state||(e.state={}),e.state.arrowMarkerAbsolute=e.arrowMarkerAbsolute,r.d.clear()}}}}]);
//# sourceMappingURL=646.981845a8.chunk.js.map